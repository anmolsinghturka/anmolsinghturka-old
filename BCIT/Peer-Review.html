<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>Material Bootstrap Wizard by Creative Tim</title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png" />
	<link rel="icon" type="image/png" href="assets/img/favicon.png" />

	<!--     Fonts and icons     -->
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />

	<!-- CSS Files -->
	<link href="assets/css/bootstrap.min.css" rel="stylesheet" />
	<link href="assets/css/material-bootstrap-wizard.css" rel="stylesheet" />

	<!-- CSS Just for demo purpose, don't include it in your project -->
	<link href="assets/css/demo.css" rel="stylesheet" />
</head>

<body>
    <div class="image-container set-full-height" style="background-image: url('assets/img/wizard-book.jpg')">
        <!--   Creative Tim Branding   -->
        <a href="">
            <div class="logo-container">
                <div class="logo">
                    <img src="assets/img/new_logo.png">
                </div>
                <div class="brand">
                    <p>BCIT Peer Review </p>
                </div>
            </div>
        </a>
        <!--  Made With Material Kit  -->
        <a href="http://demos.creative-tim.com/material-kit/index.html?ref=material-bootstrap-wizard" class="made-with-mk">
            <div class="brand">MK</div>
            <div class="made-with">Made with <strong>Material Kit</strong></div>
        </a>

       
        <!--   Big container   -->
        <div class="container">
            <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                    <!--      Wizard container        -->
                    <div class="wizard-container">
                        <div class="card wizard-card" data-color="purple" id="wizard">

                            <form action="" method="" id="myDIV" >
                                <!--        You can switch " data-color="rose" "  with one of the next bright colors: "blue", "green", "orange", "purple"        -->
                                <div class="wizard-header">
                                    <h3 class="wizard-title">
                                        Peer Review 2018
                                    </h3>
                                    <h5>This information will let us know more about your peers.</h5>

                                    <h3></h3>
                                </div>


                                <div >
                                    <div class="wizard-navigation">
                                        <ul>
                                            <li><a href="#location" data-toggle="tab">About</a></li>
                                            <li><a href="#type" data-toggle="tab">Employment Type</a></li>
                                            <li><a href="#facilities" data-toggle="tab">More Details</a></li>
                                            <li><a href="#description" data-toggle="tab">Description</a></li>
                                        </ul>
                                    </div>
                                    <div class="tab-content">
                                        <div class="tab-pane" id="location">
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <h4 class="info-text"> Let's start with the basic information</h4>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <i class="material-icons">face</i>
                                                        </span>
                                                        <div class="form-group label-floating">
                                                            <label class="control-label">First Name <small> (required)</small></label>
                                                            <input name="firstname" type="text" class="form-control" id="firstname">
                                                        </div>
                                                    </div>


                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <i class="material-icons">email</i>
                                                        </span>
                                                        <div class="form-group label-floating">
                                                            <label class="control-label">Your Email<small> (required)</small></label>
                                                            <input name="email" type="text" class="form-control" id="email">
                                                        </div>
                                                    </div>

                                                </div>


                                                <div class="input-group">
                                                    <span class="input-group-addon">
                                                        <i class="material-icons">record_voice_over</i>
                                                    </span>
                                                    <div class="form-group label-floating">
                                                        <label class="control-label">Last Name <small>(required)</small></label>
                                                        <input name="lastname" type="text" class="form-control" id="lastname">
                                                    </div>

                                                </div>


                                            </div>
                                        </div>
                                        <div class="tab-pane" id="type">
                                            <h4 class="info-text">What type of employment do you have? </h4>
                                            <div class="row">
                                                <div class="col-sm-10 col-sm-offset-1">
                                                    <div class="col-sm-4 col-sm-offset-2">
                                                        <div class="choice" data-toggle="wizard-radio" rel="tooltip" title="Select this option if you have a Permanent Employment.">
                                                            <input type="radio" name="type" value="House">
                                                            <div class="icon">
                                                                <i class="material-icons">home</i>
                                                            </div>
                                                            <h6>Permanent</h6>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="choice" data-toggle="wizard-radio" rel="tooltip" title="Select this option if you have a Contract Employment">
                                                            <input type="radio" name="type" value="Appartment">
                                                            <div class="icon">
                                                                <i class="material-icons">hotel</i>
                                                            </div>
                                                            <h6>Contract</h6>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane" id="facilities">
                                            <h4 class="info-text">Drop us a small description. </h4>
                                            <div class="row">
                                                <div class="col-sm-5 col-sm-offset-1">
                                                    <div class="form-group label-floating">
                                                        <label class="control-label">I teach in a </label>
                                                        <select class="form-control">
                                                            <option disabled="" selected=""></option>
                                                            <option>Clinical Setting</option>
                                                            <option>Campus Setting</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-5">
                                                    <div class="form-group label-floating">
                                                        <label class="control-label">I teach in Room number</label>
                                                        <select class="form-control">
                                                            <option disabled="" selected=""></option>
                                                            <option>SE12 4594</option>
                                                            <option>SE12 4595</option>
                                                            <option>SE12 4593</option>
                                                            <option>I have no idea</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-5 col-sm-offset-1">
                                                    <div class="form-group label-floating">
                                                        <label class="control-label">What time do you teach?</label>
                                                        <select class="form-control">
                                                            <option disabled="" selected=""></option>
                                                            <option>8:00 in the morning</option>
                                                            <option>9:00 in the morning</option>
                                                            <option>1:00 in the afternoon </option>
                                                            <option>During the day</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-5">
                                                    <div class="form-group label-floating">
                                                        <label class="control-label">How many windows are in your classroom?</label>
                                                        <select class="form-control">
                                                            <option disabled="" selected=""></option>
                                                            <option>1</option>
                                                            <option>4</option>
                                                            <option>8</option>
                                                            <option>This is a dumb question</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane" id="description">
                                            <div class="row">
                                                <h4 class="info-text"> Drop us a small description about your peer review. </h4>
                                                <div class="row">
                                                    <div class="col-sm-5 col-sm-offset-1">
                                                        <div class="form-group label-floating">
                                                            <label class="control-label">Which peer do you want to Review?</label>
                                                            <select class="form-control">
                                                                <option disabled="" selected=""></option>
                                                                <option>CJ</option>
                                                                <option>Doug</option>
                                                                <option>Glynda</option>
                                                                <option>Julie</option>
                                                                <option>Janet</option>
                                                                <option>..</option>

                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-sm-offset-1">
                                                    <div class="form-group label-floating">
                                                        <label class="control-label">Review description</label>
                                                        <textarea class="form-control" placeholder="" rows="9"></textarea>
                                                    </div>
                                                </div>


                                                <div class="col-sm-4">
                                                    <div class="form-group label-floating">
                                                        <label class="control-label">Example</label>
                                                        <p class="description">"My peer is really nice. We get together every sunday when we go fishing and we catch a lot. My peer has some kind of magic shield around it. It is so awesome."</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="wizard-footer">
                                        <div class="pull-right">
                                            <input type='button' class='btn btn-next btn-fill btn-primary btn-wd' name='next' value='Next' />
                                            <input type='button' class='btn btn-finish btn-fill btn-primary btn-wd' name='finish' value='Finish' />
                                        </div>
                                        <div class="pull-left">
                                            <input type='button' class='btn btn-previous btn-fill btn-default btn-wd' name='previous' value='Previous' />
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>

                                </div>
                            </form>
                        </div>
                    </div> <!-- wizard container -->
                </div>
            </div> <!-- row -->
        </div> <!--  big container -->
        <div class="footer">
            <div class="container text-center">
                Made with work by Janet and Team. Contact us <a href="mailto:janet_macdonald@bcit.ca">here.</a>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        // Client ID and API key from the Developer Condsole
        var CLIENT_ID = '1034587997664-ajmglhpg3fp0f2mn3cm55uhv0h8cvi2i.apps.googleusercontent.com';
        var API_KEY = 'AIzaSyAxkCyY30J0loy0zBVbw6yYDDernLY-wYs';

        // Array of API discovery doc URLs for APIs used by the quickstart
        var DISCOVERY_DOCS = ["https://sheets.googleapis.com/$discovery/rest?version=v4"];

        // Authorization scopes required by the API; multiple scopes can be
        // included, separated by spaces.
        var SCOPES = "https://www.googleapis.com/auth/drive";

        var authorizeButton = document.getElementById('authorize-button');
        var signoutButton = document.getElementById('signout-button');
        var x = document.getElementById('myDIV');
        /**
         *  On load, called to load the auth2 library and API client library.
         */
        function handleClientLoad() {
            gapi.load('client:auth2', initClient);
        }

        /**
         *  Initializes the API client library and sets up sign-in state
         *  listeners.
         */
        function initClient() {
            gapi.client.init({
                apiKey: API_KEY,
                clientId: CLIENT_ID,
                discoveryDocs: DISCOVERY_DOCS,
                scope: SCOPES
            }).then(function () {
                // Listen for sign-in state changes.
                gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

                // Handle the initial sign-in state.
                updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
                authorizeButton.onclick = handleAuthClick;
                signoutButton.onclick = handleSignoutClick;
            });
        }

        /**
         *  Called when the signed in status changes, to update the UI
         *  appropriately. After a sign-in, the API is called.
         */

     

        function updateSigninStatus(isSignedIn) {
            if (isSignedIn) {
                authorizeButton.style.display = 'none';
                signoutButton.style.display = 'block';
            



            } else {

               
               
                authorizeButton.style.display = 'block';
                signoutButton.style.display = 'none';
            }
        }

        /**
         *  Sign in the user upon button click.
         */
        function handleAuthClick(event) {
            gapi.auth2.getAuthInstance().signIn();
        }

        /**
         *  Sign out the user upon button click.
         */
        function handleSignoutClick(event) {
            gapi.auth2.getAuthInstance().signOut();
        }

        /**
         * Append a pre element to the body containing the given message
         * as its text node. Used to display the results of the API call.
         *
         * @param {string} message Text to be placed in pre element.
         */
        function appendPre(message) {
            var pre = document.getElementById('content');
            var textContent = document.createTextNode(message);
            pre.appendChild(textContent);
        }

        function appendPre2(message) {
            var pre = document.getElementById('content2');
            var textContent = document.createTextNode(message);
            pre.appendChild(textContent);
        }

        /**
         * Print the names and majors of students in a sample spreadsheet:
         * https://docs.google.com/spreadsheets/d/1Dh22TlqXKV852zhVP1qb6GEYYB-AEfGMhbSkQW2Tenw/edit
         */
        function listMajors() {

            gapi.client.sheets.spreadsheets.values.get({
                spreadsheetId: '1Dh22TlqXKV852zhVP1qb6GEYYB-AEfGMhbSkQW2Tenw',
                range: 'Class Data!A2:E',
            }).then(function (response) {
                var range = response.result;
                if (range.values.length > 0) {

                    var arr = [];
                    var len = range.values.length;
                    for (var i = 0; i < len; i++) {
                        var row = range.values[i];
                        arr.push({
                            number: i + 2,
                            key: row[0],
                            sortable: row[1],
                            resizeable: row[2]
                        });
                    }

                    var x = document.getElementById("frm1");
                    var text = "";
                    var i;
                    var a = [];

                    if (x.length > 0) {

                        appendPre('\n' + 'Name,      Rubric');
                    } else if (x.length > 7) {

                        appendPre2('Will get priority next time');
                    }

                    var ar = [];
                    for (i = 0; i < x.length; i++) {

                        a.push(x.elements[i].value);

                    }
                    var ary = [];

                    for (var j = 0; j < x.length; j++) {

                        for (var k = 0; k < len; k++) {



                            if (a[j] == arr[k].key) {

                                ar.push({
                                    number: arr[k].number,
                                    key: arr[k].key,
                                    sortable: arr[k].sortable,
                                    resizeable: arr[k].resizeable

                                });

                            }
                        }

                    }
                    var ArrayIndex = 0;
                    // Print columns A and E, which correspond to indices 0

                    ar.sort(function (a, b) {
                        return b.sortable - a.sortable;
                    });

                    for (var q = 0; q < ar.length; q++) {
                        if (ar[q].resizeable == "no") {


                            ary.push({
                                number: ar[q].number,
                                key: ar[q].key,
                                sortable: ar[q].sortable,
                                resizeable: ar[q].resizeable

                            });

                            ArrayIndex++;
                        }

                    }


                    ary.sort(function (a, b) {
                        return b.sortable - a.sortable;
                    });
                    console.log(ArrayIndex);
                    for (var c = 0; c < ArrayIndex; c++) {
                        var index = ar.findIndex(fruit => fruit.resizeable == "no");
                        ar.splice(index, 1);

                    }

                    Array.prototype.push.apply(ary, ar);

                    var elm = document.getElementById('content');
                    while (elm.firstChild) {
                        elm.removeChild(elm.firstChild);
                    }
                    for (var i = 0; i < 8; i++) {


                        appendPre('\n' + ary[i].key + '    ');

                        appendPre(ary[i].sortable);


                        var message = "yes";


                        var ra = ary[i].number;
                        makeApiCall(message, ra);
                    }


                    var elm2 = document.getElementById('content2');
                    while (elm2.firstChild) {
                        elm2.removeChild(elm2.firstChild);
                    }
                    for (var l = 8; l < x.length; l++) {
                        appendPre2('\n' + ary[l].key + '    ');
                        appendPre2(ary[l].sortable);

                        if (ary.findIndex(fruit => fruit.resizeable == "no") == -1) {
                            var message = "no";
                            var ra = ary[l].number;
                            makeApiCall(message, ra);
                        }
                    }

                } else {
                    appendPre('No data found.');
                }
            }, function (response) {
                appendPre('Error: ' + response.result.error.message);
            });

        }



        function spliceArray(arra, s) {
            arra.splice(s, 1);
        }

        function makeApiCall(message, ra) {
            var params = {
                // The ID of the spreadsheet to update.
                spreadsheetId: '1Dh22TlqXKV852zhVP1qb6GEYYB-AEfGMhbSkQW2Tenw',

                // The A1 notation of the values to update.
                range: 'Class Data!C' + ra,  // TODO: Update placeholder value.

                // How the input data should be interpreted.
                valueInputOption: 'RAW',  // TODO: Update placeholder value.
            };

            var valueRangeBody = {
                "values": [
                    [message]
                ],
            };

            var request = gapi.client.sheets.spreadsheets.values.update(params, valueRangeBody);
            request.then(function (response) {
                // TODO: Change code below to process the `response` object:
                console.log(response.result);
            }, function (reason) {
                console.error('error: ' + reason.result.error.message);
            });
        }


        function resetPreference() {

            for (var p = 0; p < 35; p++) {

                var message = "";
                var ra = p + 2;
                makeApiCall(message, ra);
            }

        }

    </script>

    <script async defer src="https://apis.google.com/js/api.js"
            onload="this.onload=function(){};handleClientLoad()"
            onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>

</body>
	<!--   Core JS Files   -->
	<script src="assets/js/jquery-2.2.4.min.js" type="text/javascript"></script>
	<script src="assets/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="assets/js/jquery.bootstrap.js" type="text/javascript"></script>

	<!--  Plugin for the Wizard -->
	<script src="assets/js/material-bootstrap-wizard.js"></script>

	<!--  More information about jquery.validate here: http://jqueryvalidation.org/	 -->
	<script src="assets/js/jquery.validate.min.js"></script>

</html>
